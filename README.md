# SecurityProxyServer
Прокси сервер, прослушивающий HTTP и HTTPS соединения и сохраняющий запросы для их повторного вызова в PostgreSQL

##  Инструкция по запуску
* Запустите микросервисы proxy-db, proxy-main, proxy-repeater командой `sudo docker-compose up`
* Подключите прокси к firefox mozilla:
    * Настройте прокси адрес
        * Откройте настройки. В поиске вбейте "прокси". В разделе "параметры сети" нажмите кнопку "настроить"
         ![Альтернативный текст](/readme/proxy_find.jpg)
        * Укажите вариант "ручная настройка прокси", в поле 'HTTP прокси' впишите 'localhost', в поле 'порт' укажите '8888'
        ![Альтернативный текст](/readme/proxy_address.jpg)
        * Нажмите "ОК". Это очень важный пункт!
    * Добавьте сертификат в центр сертификации
        * Вновь откройте настройки. В поиске вбейте "сертификаты". В разделе сертификаты нажмите на кнопку "Просмотр сертификатов"
          ![Альтернативный текст](/readme/ca_find.jpg)
        * Перейдите в раздел "центры сертификации" и нажмите на кнопку "Импортировать..."
        ![Альтернативный текст](/readme/ca_file.jpg)
        * В корне проекта после выполнения `sudo docker-compose up` должны были появиться два файла: ca-cert.crt и ca-key.pem. Выберите файл  **ca-cert.crt**
* Поздравляем. Прокси подключено! Чтобы воспользоваться сервисом proxy-repeater, нужно обратиться по адресу http://localhost:8889/history

##  Как пользоваться proxy-repeater
* При отправке GET-запроса по адресу http://localhost:8889/history вы получите последние 20 запросов, прошедших через прокси. Пример:
 ![Альтернативный текст](/readme/postman_get.jpg)
    * Вы можете указать параметры запроса для фильтрации поиска
        * http://localhost:8889/history?scheme=http - выбрать схему запроса. Допустимые варианты: http, https
        * http://localhost:8889/history?method=post - выбрать метод запроса. Допустимые варианты: get, head, post, update, options, delete.
        * http://localhost:8889/history?limit=100 - количество записей. По умолчанию 20
        * http://localhost:8889/history?last=false - отменить сортировку с конца - будет выводить более старые запросы первыми
        * http://localhost:8889/history?host=mail.ru - выбрать хост запроса. ВАЖНО: хост != ссылка на страницу
* При отправке GET-запроса по адресу http://localhost:8889/{id}/send вы повторите запрос с идентификатором id. Пример:
 ![Альтернативный текст](/readme/postman_request.jpg)
* При отправке DELETE-запроса по адресу http://localhost:8889/history вы очистите историю запросов.

# Приятного использования!