# SecurityProxyServer
Прокси сервер, прослушивающий HTTP и HTTPS соединения и сохраняющий запросы для их повторного вызова в PostgreSQL

##  Инструкция по запуску
* Запустите микросервисы proxy-db, proxy-main, proxy-repeater командой `sudo docker-compose up`
* Подключите прокси к google chrome:
    * Настройте прокси адрес
        * Откройте настройки системы, установите адрес прокси в 'localhost:8888'
         ![Альтернативный текст](/readme/proxy_address.jpg)
    * Добавьте сертификат в центр сертификации
        * Откройте настройки google chrome. В поиске вбейте "сертификат". В разделе сертификаты нажмите на кнопку "Настроить сертификаты"
          ![Альтернативный текст](/readme/ca_find.jpg)
        * Перейдите в раздел "центры сертификации" и нажмите на кнопку "Импорт"
        * В корне проекта после выполнения `sudo docker-compose up` должны были появиться два файла: ca-cert.crt и ca-key.pem. Выберите файл  **ca-cert.crt**
        ![Альтернативный текст](/readme/ca_path.jpg)
* Поздравляем. Прокси подключено! Чтобы воспользоваться сервисом proxy-repeater, нужно обратиться по адресу http://localhost:8889/history

##  Как пользоваться proxy-repeater
* При отправке GET-запроса по адресу http://localhost:8889/history вы получите последние 20 запросов, прошедших через прокси. Пример:
 ![Альтернативный текст](/readme/postman_get.jpg)
    * Вы можете указать параметры запроса для фильтрации поиска
        * http://localhost:8889/history?scheme=http - выбрать схему запроса. Допустимые варианты: http, https
        * http://localhost:8889/history?method=post - выбрать метод запроса. Допустимые варианты: get, head, post, update, options, delete.
        * http://localhost:8889/history?limit=100 - количество записей. По умолчанию 20
        * http://localhost:8889/history?last=false - отменить сортировку с конца - будет выводить более старые запросы первыми
        * http://localhost:8889/history?host=mail.ru - выбрать хост запроса. ВАЖНО: хост != ссылка на страницу
* При отправке GET-запроса по адресу http://localhost:8889/{id}/send вы повторите запрос с идентификатором id. Пример:
 ![Альтернативный текст](/readme/postman_request.jpg)
* При отправке DELETE-запроса по адресу http://localhost:8889/history вы очистите историю запросов.

# Приятного использования!
если что-то пошло не так, telegram @StandardUser